---
format:
  html:
    header-includes: |
        <link rel="icon" type="image/png" sizes="32x32" href="../_extensions/InseeFrLab/onyxia/favicon-32x32.png">
---

# Acquisition

## Images satellite

### PlÃ©iades

Les images PlÃ©iades prÃ©sentent lâ€™avantage dâ€™offrir une trÃ¨s haute rÃ©solution (50 cm). Toutefois, elles sont la propriÃ©tÃ© dâ€™Airbus, ce qui limite leur accessibilitÃ© : lâ€™acquisition passe gÃ©nÃ©ralement par un achat de licence. En tant quâ€™institution franÃ§aise, nous bÃ©nÃ©ficions d'un accÃ¨s gratuit Ã  ces donnÃ©es via [Dinamis](https://dinamis.data-terra.org/). Il suffit de crÃ©er un compte sur Dinamis et de rÃ©aliser une demande dâ€™accÃ¨s.
Nous avons un contact Ã  l'IGN pour simplifier la procÃ©dure et il nous transmet les images directement. Toutefois, mÃªme avec ce canal, il reste nÃ©cessaire de crÃ©er un compte Dinamis et de signer un contrat de licence d'utilisation.

Lorsque les images sont disponibles, notre interlocuteur Ã  lâ€™IGN, [Erik Parisot](erik.parisot@ign.fr), nous en informe par mail, en nous transmettant les accÃ¨s Ã  un serveur FTP. Les donnÃ©es peuvent alors Ãªtre extraites puis transfÃ©rÃ©es sur le S3 du namespace `projet-slums-detection` au sein du Datalab, selon la structure dÃ©crite dans @data-raw.  

::: {.callout-tip}
# Comment rÃ©cupÃ©rer les images PlÃ©iades de l'IGN ?

1. Ouvrir un service VSCode sur le Datalab. âš ï¸ Pour les volumes importants, pensez Ã  augmenter la persistance (ex : 500Gi) lors du lancement du service.
2. Cloner le [dÃ©pot d'infÃ©rence](https://github.com/InseeFrLab/satellite-images-inference) etaccÃ©der au script `bash/download_pleiades_ign.sh`.
3. Renseigner les informations spÃ©cifiques au serveur FTP ainsi que les arguments nÃ©cessaires (dÃ©partement, annÃ©e).
4. ExÃ©cuter le script pour tÃ©lÃ©charger les donnÃ©es localement dans le service. Vous pouvez ensuite explorer les fichiers comme d'habitude (`cd`, `ls`, etc.). 
5. Une fois en local, vÃ©rifiez que les images soient bien au format `.tif`, si ce n'est pas le cas, exÃ©cuter le script `src/write_jp2_to_tiff.py` pour les convertir et les stocker sur le S3
:::


### Sentinel-2

Pour un accÃ¨s libre et beaucoup plus rapide, lâ€™utilisation des images Sentinel-2 constitue une alternative intÃ©ressante. Ces images ont une rÃ©solution de 10 mÃ¨tres.
Les images Sentinel-2 peuvent Ãªtre rÃ©cupÃ©rÃ©es via diffÃ©rentes plateformes comme Google Earth Engine, Sentinel Hub ou encore Copernicus Data Space Ecosystem.
Un exemple d'utilisation et de tÃ©lÃ©chargement de ces donnÃ©es est disponible dans le dÃ©pÃ´t [Hackathon NTTS 2025](https://github.com/InseeFrLab/hackathon-ntts-2025), en consultant le script `preprocess/main_nuts.py`.


## Labels (pour l'entraÃ®nement du modÃ¨le)

### BDTOPO

La BD TOPO est une description vectorielle 3D (structurÃ©e en objets) des Ã©lÃ©ments du territoire et de ses infrastructures, de prÃ©cision mÃ©trique, exploitable Ã  des Ã©chelles allant du 1 : 2 000 au 1 : 50 000.

Les objets de la BD TOPOÂ® sont regroupÃ©s par thÃ¨mes :

- Administratif (limites et unitÃ©s administratives) ;
- **BÃ¢ti (constructions)** ;
- Hydrographie (Ã©lÃ©ments ayant trait Ã  lâ€™eau) ;
- Lieux nommÃ©s (lieu ou lieu-dit possÃ©dant un toponyme et dÃ©crivant un espace naturel ou un lieu habitÃ©) ;
- Occupation du sol (vÃ©gÃ©tation, estran, haie) ;
- Services et activitÃ©s (services publics, stockage et transport des sources d'Ã©nergie, lieux et sites industriels) ;
- Transport (infrastructures du rÃ©seau routier, ferrÃ© et aÃ©rien, itinÃ©raires) ;
- Zones rÃ©glementÃ©es (la plupart des zonages faisant l'objet de rÃ©glementations spÃ©cifiques).

Dans notre cas, seule la couche **BÃ¢ti** a Ã©tÃ© utilisÃ©e.

::: {.callout-tip}
# Comment rÃ©cupÃ©rer les donnÃ©es de la BDTOPO

Les donnÃ©es de la BDTOPO sont accessibles au format archivÃ© 7z soit en shapefile soit en geopackage Ã  l'adresse suivante : [https://geoservices.ign.fr/bdtopo#telechargementgpkgreg]().
Elle est stockÃ©e par dÃ©partement.

:::



### COSIA

Les cartes CoSIA dÃ©crivent la couverture du sol, soit la nature du sol, selon 16 classes (bÃ¢timent, surface dâ€™eau, conifÃ¨re, culture, broussaille...). Cette description du sol est produite pour tout le territoire franÃ§ais (mÃ©tropole et DROM) et avec une haute rÃ©solution de 20 cm par pixel. Ces annotations ont Ã©tÃ© obtenues par l'IGN Ã  l'aide d'un modÃ¨le de ML. Il faut donc bien garder en tÃªte qu'**on utilise des prÃ©dictions d'un modÃ¨le comme ground truth**. 

::: {.callout-tip}
# Comment rÃ©cupÃ©rer les donnÃ©es de COSIA

1. AccÃ©der au site [COSIA](https://cosia.ign.fr/info#export)
2. Remplir le formulaire d'accÃ¨s et sÃ©lectionner le territoire d'intÃ©rÃªt. TÃ©lÃ©charger le fichier `.zip`
3. L'importer dans un service du Datalab, le dÃ©compresser (commande `unzip` sous Linux) et organiser les fichiers selon la structure attendue sur S3.

:::

### ğŸ—ºï¸ GÃ©omÃ©trie dâ€™ilots

La gÃ©ographie des ilots est **arrÃªtÃ©e chaque annÃ©e au 31 octobre**.  
Câ€™est cette gÃ©ographie qui sâ€™applique pendant le **Recensement de la Population (RP)**.

> ğŸ“Œ *Exemple* : pour lâ€™enquÃªte de recensement **2026**, on utilise la gÃ©omÃ©trie des ilots **arrÃªtÃ©e au 31 octobre 2025**.

Dans tous les cas, il faut s'assurer que **le SERN GÃ©ographie** et **le ST Mayotte** utilisent bien la mÃªme version des ilots (des changements exceptionnels peuvent Ãªtre demandÃ©s en cas dâ€™urgence).

::: {.callout-tip}
# Comment rÃ©cupÃ©rer les gÃ©omÃ©tries d'ilots ?

1. Envoyer un mail au [SERN gÃ©ographie](mailto:dr69-sern-repertoires-geographie@insee.fr)  
2. RÃ©cupÃ©rer le dossier zip fourni et le placer dans le dossier **cluster-geom-raw** sur le s3  
3. Lancer [ce code](https://github.com/InseeFrLab/satellite-images-preprocess/blob/main/src/preprocess-ilot-geom.py) pour preprocesser le dossier afin de crÃ©er un fichier parquet par dÃ©partement qui se placeront dans le dossier **data-clusters**  
:::